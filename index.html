<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>แดชบอร์ดเหตุการณ์ความเสี่ยง LifeCare</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=K2D:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
  <script src="assets/js/app.js" type="module" defer></script>
</head>
<body>
  <aside class="sidebar">
    <div class="brand">
      <div class="brand-icon">IR</div>
      <div class="brand-txt">
        <h1>LifeCare</h1>
        <p>แดชบอร์ดติดตามเหตุการณ์ความเสี่ยง</p>
      </div>
    </div>
    <nav class="nav">
      <a class="nav-item active" href="#dashboard">
        <span class="nav-dot"></span> ภาพรวม
      </a>
      <a class="nav-item" href="#analytics"><span class="nav-dot"></span> วิเคราะห์เหตุการณ์</a>
      <a class="nav-item" href="#table"><span class="nav-dot"></span> บันทึกเหตุการณ์</a>
    </nav>
    <div class="sidebar-bottom">
      <button id="logoutBtn" class="btn btn-ghost" title="ออกจากระบบ">ออกจากระบบ</button>
    </div>
  </aside>

  <main class="main">
    <header class="topbar">
      <div>
        <h2 id="helloUser">สวัสดี ผู้ดูแลระบบ</h2>
        <p class="subtitle">แดชบอร์ดนี้ช่วยให้ติดตามเหตุการณ์และการดำเนินการได้อย่างชัดเจน</p>
      </div>
      <div class="search">
        <input id="searchBox" type="search" placeholder="ค้นหาฟังก์ชันหรือเมนู" title="พิมพ์คำสำคัญเพื่อค้นหาเมนู">
      </div>
      <div class="user">
        <div class="avatar">NH</div>
        <div class="user-meta">
          <strong>ชื่อผู้ใช้</strong>
          <small>ผู้ดูแลระบบ</small>
        </div>
      </div>
    </header>

    <section class="kpi-row" id="dashboard">
      <article class="kpi-card">
        <header>เหตุการณ์ทั้งหมด</header>
        <div class="kpi-value" id="kpiTotal">0</div>
        <footer><span id="kpiTotalDelta">—</span></footer>
      </article>
      <article class="kpi-card">
        <header>เหตุการณ์ด้านคลินิก</header>
        <div class="kpi-value" id="kpiClinical">0</div>
        <footer><span id="kpiClinicalDelta">—</span></footer>
      </article>
      <article class="kpi-card">
        <header>เหตุการณ์ทั่วไป</header>
        <div class="kpi-value" id="kpiGeneral">0</div>
        <footer><span id="kpiGeneralDelta">—</span></footer>
      </article>
      <article class="kpi-card">
        <header>ปิดเหตุการณ์แล้ว</header>
        <div class="kpi-value" id="kpiResolved">0</div>
        <footer><span id="kpiResolvedRate">—</span></footer>
      </article>
    </section>

    <section class="grid-3" id="analytics">
      <div class="card">
        <div class="card-header">
          <h3>สถิติแนวโน้มเหตุการณ์</h3>
          <select id="statRange">
            <option value="m">รายเดือน</option>
            <option value="q">รายไตรมาส</option>
            <option value="y">รายปี</option>
          </select>
        </div>
        <canvas id="trendLine" aria-label="กราฟแนวโน้มเหตุการณ์" role="img"></canvas>
      </div>

      <div class="card">
        <div class="card-header">
          <h3>สัดส่วนความรุนแรง</h3>
          <input id="refDate" type="date">
        </div>
        <div class="donut-wrap">
          <canvas id="donut" aria-label="สัดส่วนระดับความรุนแรง" role="img"></canvas>
          <div class="donut-center"><span id="donutPct">0%</span><small>เหตุการณ์ระดับต่ำ</small></div>
        </div>
        <ul class="legend">
          <li><span class="dot dot-low"></span>ความรุนแรงต่ำ <strong id="lgLow">0%</strong></li>
          <li><span class="dot dot-moderate"></span>ปานกลาง <strong id="lgModerate">0%</strong></li>
          <li><span class="dot dot-severe"></span>รุนแรง <strong id="lgSevere">0%</strong></li>
          <li><span class="dot dot-death"></span>เสียชีวิต <strong id="lgDeath">0%</strong></li>
          <li><span class="dot dot-other"></span>ไม่ระบุ <strong id="lgOther">0%</strong></li>
        </ul>
      </div>

    </section>

    <section class="card" id="table">
      <div class="card-header">
        <h3>การจัดการเหตุการณ์</h3>
        <div class="actions">
          <input id="tableSearch" class="input" type="search" placeholder="ค้นหาด้วยชื่อ หน่วยงาน หรือรหัส" title="พิมพ์คำสำคัญแล้วผลลัพธ์จะกรองให้ทันที">
          <button class="btn btn-primary" id="advFilter" title="ใช้ตัวกรองที่ตั้งค่าไว้ล่วงหน้า">ตัวกรองด่วน</button>
        </div>
      </div>
      <div class="data-meta" aria-live="polite">
        <span><strong>อัปเดตล่าสุด:</strong> <span id="lastUpdated">—</span></span>
        <span><strong>จำนวนรายการ:</strong> <span id="rowCount">0</span></span>
      </div>
      <p class="helper-text">คำแนะนำ: ใช้ตัวกรองด่วนเพื่อคัดเฉพาะเหตุการณ์สำคัญในหนึ่งคลิก</p>
      <div class="table-wrap">
        <table id="dataTable">
          <thead>
            <tr>
              <th>รหัสเหตุการณ์</th>
              <th>ประเภทเหตุการณ์</th>
              <th>รายละเอียด</th>
              <th>หน่วยงาน</th>
              <th>ระดับความรุนแรง</th>
              <th>สถานะ</th>
              <th>การดำเนินการ</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <footer class="footer">
      <small>&copy; 2025 — แดชบอร์ดเหตุการณ์ความเสี่ยง LifeCare</small>
    </footer>
  </main>
</body>
</html>
